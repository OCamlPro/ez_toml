<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About &mdash; ez_toml master
 (e1bbb02
) (2024/03/05 14:12) documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/fixes.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="#" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to install" href="install.html" />
    <link rel="prev" title="Welcome to ez_toml" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ez_toml
          </a>
              <div class="version">
                master
 (e1bbb02
)
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://ocamlpro.github.io/ez_toml">Home</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#toml-format">TOML Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-toml-check-tool">The toml-check tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#comparison-with-toml-opam-package">Comparison with Toml opam package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ocaml-interface">OCaml Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-toml-extensions">Supported TOML Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#authors">Authors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to install</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ocamlpro.github.io/ez_toml/doc">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocamlpro/ez_toml">Devel and Issues on Github</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ez_toml</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>About</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/about.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="about">
<h1>About<a class="headerlink" href="#about" title="Permalink to this headline"></a></h1>
<p>This ez_toml library is a small library to read and write files in TOML
format. Compared to the toml library, it supports more features (mixed
arrays for example), fixes a few bugs in the printer, and keeps better
track of options order and comments in file.</p>
<section id="toml-format">
<h2>TOML Format<a class="headerlink" href="#toml-format" title="Permalink to this headline"></a></h2>
<p>For a description of TOML, see <a class="reference external" href="https://toml.io/en/">https://toml.io/en/</a></p>
</section>
<section id="the-toml-check-tool">
<h2>The toml-check tool<a class="headerlink" href="#the-toml-check-tool" title="Permalink to this headline"></a></h2>
<p>The <code class="code docutils literal notranslate"><span class="pre">toml-check</span></code> tool is a very simple tool. It was initially
designed to test the parser/printers of <code class="code docutils literal notranslate"><span class="pre">ez_toml</span></code>, but finally
distributed as it could be useful on its own.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">toml-check</span></code> tool can be used to check the syntax of a TOML
file, to convert it to JSON, or to convert a JSON file to TOML
(typically, if you have a doubt on how to express something in TOML).
The tool uses <code class="code docutils literal notranslate"><span class="pre">ez_toml</span></code> to parse/print files, but can also be
asked to use the former <code class="code docutils literal notranslate"><span class="pre">toml</span></code> library for comparison.</p>
<p>For more information, use:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="n">toml</span><span class="o">-</span><span class="n">check</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
</section>
<section id="comparison-with-toml-opam-package">
<h2>Comparison with Toml opam package<a class="headerlink" href="#comparison-with-toml-opam-package" title="Permalink to this headline"></a></h2>
<p>Compared to the <code class="code docutils literal notranslate"><span class="pre">toml</span></code> opam package, <code class="code docutils literal notranslate"><span class="pre">ez_toml</span></code> contains
the following improvements:</p>
<ul class="simple">
<li><p>Simpler interface: keys are simple <cite>string</cite> types instead of abstract</p></li>
<li><p>More conservative interface: integers, floats and dates are not
parsed. Instead, they are returned as simple <cite>string</cite> types that
have to be processed by the user.</p></li>
<li><p>Better support for TOML:</p>
<ul>
<li><p>Support for mixed arrays (the <code class="code docutils literal notranslate"><span class="pre">toml</span></code> library only allows
monomorphic arrays)</p></li>
<li><p>Support for hexa, octal and binary integer notations</p></li>
</ul>
</li>
<li><p>Better pretty-printing:</p>
<ul>
<li><p>Pretty-prints definitions in the same order the order as they were
read (the <code class="code docutils literal notranslate"><span class="pre">toml</span></code> library pretty-pretty only prints definitions
in alphabetical order)</p></li>
<li><p>Comments can be attached before and after definitions to be
pretty-printed in the file. The parser will automatically attached
such comments when definitions are read from a file.</p></li>
</ul>
</li>
</ul>
</section>
<section id="ocaml-interface">
<h2>OCaml Interface<a class="headerlink" href="#ocaml-interface" title="Permalink to this headline"></a></h2>
<p>A typical application using <code class="code docutils literal notranslate"><span class="pre">ez_toml</span></code> will begin with:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">open</span> <span class="nn">Ez_toml</span><span class="p">.</span><span class="nc">V1</span>
<span class="k">open</span> <span class="nn">TOML</span><span class="p">.</span><span class="nc">Types</span>
</pre></div>
</div>
<p>The first line means that the application is using version 1 of the
interface. Only the <code class="code docutils literal notranslate"><span class="pre">TOML</span></code> submodule is supposed to be used
afterwards.</p>
<p>The second line adds all the types manipulated in the <code class="code docutils literal notranslate"><span class="pre">TOML</span></code>
module to the environment. This is useful to directly access labels
and constructors. We advise not to open <code class="code docutils literal notranslate"><span class="pre">TOML</span></code> itself, and keep
using qualified names for all its functions.</p>
<p>The main type to be manipulated is <code class="code docutils literal notranslate"><span class="pre">node</span></code>. This type represents
a value in the TOML file, either the complete configuration file
itself, a section or a value assigned to a variable.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">TOML</span></code> module defines functions to create nodes, to get and
set values in tables, and to convert them to OCaml standard types.</p>
<p>A lower-level interface is also available through the use of the
<a href="#id1"><span class="problematic" id="id2">:type:`value`</span></a> type, that is stored in every <code class="code docutils literal notranslate"><span class="pre">node</span></code>. This
<code class="code docutils literal notranslate"><span class="pre">value</span></code> type is harder to use, as integers, floats and dates are
actually stored as strings inside, requiring conversions to use them.</p>
</section>
<section id="supported-toml-extensions">
<h2>Supported TOML Extensions<a class="headerlink" href="#supported-toml-extensions" title="Permalink to this headline"></a></h2>
<p>The <code class="code docutils literal notranslate"><span class="pre">ez_toml</span></code> library supports several extensions to the TOML
format. These extensions are not “standard” in any form. Using them
will, by default, trigger an error 21. Thus, applications wanting to
use them should add 21 to the <code class="code docutils literal notranslate"><span class="pre">silent_errors</span></code> set of the
<code class="code docutils literal notranslate"><span class="pre">config</span></code> parameter.</p>
<p>The following extensions are available:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">[]</span></code>: the empty section header is used to “re-open” the root
section to add variables inside. Otherwise, it is not possible to
extend the root section once another section/array has been opened.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">[!number]</span></code>: this header means that the error code
<code class="code docutils literal notranslate"><span class="pre">number</span></code> is expected to be triggered by the next line. This
annotation is used to test that the parser correctly rejects some
sentences in the testsuite. Not all errors can be tested this way.
An error will be raised if no error happened, or if another error
was triggered. Since an error happened, the next line will not
be visible in the result of the parsing.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">value</span></code>: Variable <code class="code docutils literal notranslate"><span class="pre">x</span></code> will only be set if it does
not already exists. If it exists, no error will be raised and it
will not be modified.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">x</span> <span class="pre">:=</span> <span class="pre">value</span></code>: Variable <code class="code docutils literal notranslate"><span class="pre">x</span></code> will always be set, even if
it already exists, without raising any error.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">x</span> <span class="pre">-=</span> <span class="pre">[</span> <span class="pre">&quot;y&quot;</span> <span class="pre">]</span></code>: The sub-variable <code class="code docutils literal notranslate"><span class="pre">y</span></code> will be removed (if
it exsists) from the table <code class="code docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{}</span> <span class="pre">-=</span> <span class="pre">[</span> <span class="pre">&quot;y&quot;</span> <span class="pre">]</span></code>: The variable <code class="code docutils literal notranslate"><span class="pre">y</span></code> will be removed (if
it exsists) from the root section.</p></li>
</ul>
</section>
<section id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Fabrice Le Fessant &lt;<a class="reference external" href="mailto:fabrice&#46;le_fessant&#37;&#52;&#48;ocamlpro&#46;com">fabrice<span>&#46;</span>le_fessant<span>&#64;</span>ocamlpro<span>&#46;</span>com</a>&gt;</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to ez_toml" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="install.html" class="btn btn-neutral float-right" title="How to install" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright OCamlPro SAS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>